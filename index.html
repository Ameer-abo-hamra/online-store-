<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreetWear Fashion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- start header -->
    <div class="header" id="header">
        <div class="container">
            <h1>StreetWear Fashion.</h1>

            

            <ul class="main-nav">
                <li><a href="#Products">Products</a></li>
                <li><a href="#info">Info</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#">Follow Us</a></li>
            </ul>

            <!-- shopping cart -->
            <div class="icon-cart">
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7H7.312"/>
                    </svg>              
                <span>0</span>
            </div>

            <div class="dark-mode">
                <img src="img/moon.png" id="darkmode" style="margin-left: 10px; width: 40px;">
            </div>
        </div>
    </div>
    <!-- end header -->

     <!-- landing -->
     <div class="landing">
        <div class="container">
          <div class="text">
            <h1>Welcome, To Our Store</h1>
            <p>NEW SEASON 2024</p>
          </div>
          <div class="image">
            <img decoding="async" src="img/18.png" alt="" />
          </div>
        </div>
      </div>
    <!-- end landing -->
     <!-- features -->
     <div class="features" id="features">
        <div class="feature">
            <img src="./img/shipping.png" alt="" class="featureIcon">
            <span class="featureTitle">FREE SHIPPING</span>
            <span class="featureDesc">Free worldwide shipping on all orders.</span>
        </div>
        <div class="feature">
            <img class="featureIcon" src="./img/return.png" alt="">
            <span class="featureTitle">30 DAYS RETURN</span>
            <span class="featureDesc">No question return and easy refund in 14 days.</span>
        </div>
        <div class="feature">
            <img class="featureIcon" src="./img/gift.png" alt="">
            <span class="featureTitle">GIFT CARDS</span>
            <span class="featureDesc">Buy gift cards and use coupon codes easily.</span>
        </div>
        <div class="feature">
            <img class="featureIcon" src="./img/contact.png" alt="">
            <span class="featureTitle">CONTACT US!</span>
            <span class="featureDesc">Keep in touch via email and support system.</span>
        </div>
    </div>
      <!-- products -->
    <div class="products" id="Products">
        <h2 class="title">PRODUCTS</h2>
        <div class="listProduct"></div>
    </div>

    <!-- Start Footer -->
    <div class="footer" id="info">
    <div class="container">
        <div class="box">
        <h3>StreetWear Fashion</h3>
        <ul class="social">
            <li>
            <a href="#" class="whatsapp">
                <img src="img/whatsapp.png" alt="">
            </a>
            </li>
            <li>
            <a href="#" class="twitter">
                <img src="img/twitter.png" alt="">
            </a>
            </li>
            <li>
            <a href="#" class="insta">
                <img src="img/instagram.png" alt="">
            </a>
            </li>
        </ul>
        <p class="text">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Temporibus nulla rem, dignissimos iste aspernatur
        </p>
        </div>
        <div class="box">
        <ul class="links">
            <li><a href="#">Important Link 1</a></li>
            <li><a href="#">Important Link 2</a></li>
            <li><a href="#">Important Link 3</a></li>
            <li><a href="#">Important Link 4</a></li>
            <li><a href="#">Important Link 5</a></li>
        </ul>
        </div>
    <div class="box">
        <div class="line">
            <div class="info">Syrian Virtual University</div>
        </div>
    <p class="madeBy">Made By:<br>nour_aldeen_239772<br>Amer<br>Rema</p>
    </div>
    </div>
    </div>
    <!-- End Footer -->

    <!-- cart tab -->
    <div class="cartTab">
        <h1>Shopping Cart</h1>
        <div class="listCart">
            
        </div>
        <div class="btn">
            <button class="close">CLOSE</button>
            <button class="checkOut">Check Out</button>
        </div>
    </div>
    <!-- end cart tab -->

    <!-- payment -->
     <div class="overLay">
        <div class="payment">
            <h1 class="payTitle">Personal Information</h1>
            <label>Name and Surname</label>
            <input type="text" placeholder="John Doe" class="payInput">
            <label>Phone Number</label>
            <input type="text" placeholder="+1 234 5678" class="payInput">
            <label>Address</label>
            <input type="text" placeholder="Elton St 21 22-145" class="payInput">
            <h1 class="payTitle">Card Information</h1>
            <div class="cardIcons">
                <img src="./img/visa.png" width="40" alt="" class="cardIcon">
                <img src="./img/master.png" alt="" width="40" class="cardIcon">
            </div>
            <input type="password" class="payInput" placeholder="Card Number">
            <div class="cardInfo">
                <input type="text" placeholder="mm" class="payInput sm">
                <input type="text" placeholder="yyyy" class="payInput sm">
                <input type="text" placeholder="cvv" class="payInput sm">
            </div>
            <button class="payButton">Checkout!</button>
            <span class="pClose">X</span>
        </div>
     </div>
    

    

    <script>
        var theme;
        var darkmode = document.getElementById("darkmode");
        darkmode.onclick = function(){
            document.body.classList.toggle("darktheme")
            if (document.body.classList.contains("darktheme")){
                darkmode.src="img/sun.png";
                theme = "dark";
            }
                
            else{
                darkmode.src="img/moon.png";
                theme = "light"
            }
             
            localStorage.setItem("pageTheme", JSON.stringify(theme));
        }
        let getTheme = JSON.parse(localStorage.getItem("pageTheme"));
        if (getTheme === "dark"){
            document.body.classList = 'darktheme';
            darkmode.src="img/sun.png";
        }


        //let listProductHTML = document.querySelector('.listProduct');
        let listCartHTML = document.querySelector('.listCart');
        let iconCart = document.querySelector('.icon-cart');
        let iconCartSpan = document.querySelector('.icon-cart span');
        let body = document.querySelector('body');
        let closeCart = document.querySelector('.close');
        let products = null ;
        let cart = [];

        //open cart tab
        iconCart.addEventListener('click', () => {
            body.classList.toggle('showCart');
        })
        //close cart tab
        closeCart.addEventListener('click', () => {
            body.classList.toggle('showCart');
        })


        //add data to html
        let listProduct = document.querySelector('.listProduct');
        function addDataToHTML(){
            products.forEach(product => {
                //create new element
                let newProduct = document.createElement('div');
                newProduct.dataset.id = product.id;
                newProduct.classList.add('item');
                newProduct.innerHTML = 
                `<img src="${product.image}" alt="">
                <h2>${product.name}</h2>
                <div class="price">$${product.price}</div>
                <button class="showDetails"><a href ="/detail.html?id=${product.id}">Show Details</a></button>
                <button class="addCart">Add To Cart</button>`;
                listProduct.appendChild(newProduct);
            })
        }

        //open details
        listProduct.addEventListener('click', (event) => {
            let positionClick = event.target;
            if(positionClick.classList.contains('showDetails')){
                body.document.classList.toggle("active");
            }
        })
        //add to cart
        listProduct.addEventListener('click', (event) => {
            let positionClick = event.target;
            if(positionClick.classList.contains('addCart')){
                let id_product = positionClick.parentElement.dataset.id;
                addToCart(id_product);
            }
        })

        const addToCart = (product_id) => {
            let positionThisProductInCart = cart.findIndex((value) => value.product_id == product_id);
            if(cart.length <= 0){
                cart = [{
                    product_id: product_id,
                    quantity: 1
                }];
            }else if(positionThisProductInCart < 0){
                cart.push({
                    product_id: product_id,
                    quantity: 1
                });
            }else{
                cart[positionThisProductInCart].quantity = cart[positionThisProductInCart].quantity + 1;
            }
            addCartToHTML();
            addCartToMemory();
        }
        const addCartToMemory = () => {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        const addCartToHTML = () => {
            listCartHTML.innerHTML = '';
            let totalQuantity = 0;
            if(cart.length > 0){
                cart.forEach(item => {
                    totalQuantity = totalQuantity +  item.quantity;
                    let newItem = document.createElement('div');
                    newItem.classList.add('item');
                    newItem.dataset.id = item.product_id;

                    let positionProduct = products.findIndex((value) => value.id == item.product_id);
                    let info = products[positionProduct];
                    listCartHTML.appendChild(newItem);
                    newItem.innerHTML = `
                    <div class="image">
                            <img src="${info.image}">
                    </div>
                    <div class="name">
                        ${info.name}
                    </div>
                    <div class="totalPrice">$${info.price * item.quantity}</div>
                    <div class="quantity">
                        <span class="minus"><</span>
                        <span>${item.quantity}</span>
                        <span class="plus">></span>
                    </div>
                    `;
                })
            }
            iconCartSpan.innerText = totalQuantity;
        }

        listCartHTML.addEventListener('click', (event) => {
            let positionClick = event.target;
            if(positionClick.classList.contains('minus') || positionClick.classList.contains('plus')){
                let product_id = positionClick.parentElement.parentElement.dataset.id;
                let type = 'minus';
                if(positionClick.classList.contains('plus')){
                    type = 'plus';
                }
                changeQuantityCart(product_id, type);
            }
        })
        const changeQuantityCart = (product_id, type) => {
            let positionItemInCart = cart.findIndex((value) => value.product_id == product_id);
            if(positionItemInCart >= 0){
                let info = cart[positionItemInCart];
                switch (type) {
                    case 'plus':
                        cart[positionItemInCart].quantity = cart[positionItemInCart].quantity + 1;
                        break;
                
                    default:
                        let changeQuantity = cart[positionItemInCart].quantity - 1;
                        if (changeQuantity > 0) {
                            cart[positionItemInCart].quantity = changeQuantity;
                        }else{
                            cart.splice(positionItemInCart, 1);
                        }
                        break;
                }
            }
            addCartToHTML();
            addCartToMemory();
        }

        const initApp = () => {
            // get data product
            fetch('products.json')
            .then(response => response.json())
            .then(data => {
                products = data;
                addDataToHTML();

                // get data cart from memory
                if(localStorage.getItem('cart')){
                    cart = JSON.parse(localStorage.getItem('cart'));
                    addCartToHTML();
                }
            })
        }
        initApp();

        //show payment
        let payment = document.querySelector('.payment');
        let openPayment = document.querySelector('.checkOut');
        let closePayment = document.querySelector('.pClose');
        let overLay = document.querySelector('.overLay')

        openPayment.addEventListener("click", () => {
            payment.style.display = "flex";
            overLay.style.display = "flex";
        });
        closePayment.addEventListener("click", () => {
          payment.style.display = "none";
          overLay.style.display = "none";
        });



    </script>
</body>
</html>
